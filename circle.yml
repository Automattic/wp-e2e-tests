machine:
  node:
    version: 6.10.3

general:
  artifacts:
    - "screenshots"
    - "logs"
  branches:
    ignore:
      - /.*[v,V]isdiff.*/ # ignore branches with visdiff in their name for Circle - these are run in a separate build

dependencies:
  pre:
    - ./scripts/randomize.sh specs

test:
  override:
    - ./scripts/run-wrapper.sh:
        parallel: true
  post:
    - node_modules/.bin/junit-viewer --results=$CIRCLE_TEST_REPORTS --save=$CIRCLE_TEST_REPORTS/consolidated_results.html

experimental:
  notify:
    branches:
      ignore:
        - /^try.*/
